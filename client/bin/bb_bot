#!/usr/bin/env ruby

require 'socket'

require_relative '../lib/bomberboys_client'
include BomberboysClient

address = ARGV[0] || 'localhost'
port = ARGV[1] || 10011

begin
  socket = TCPSocket.open(address, port)
rescue
  raise "No server listening on #{address}:#{port}"
end

client = Client.new(ServerInterface.new(socket))
game = Game.new
client.register(game)

client.start

name = ARGV[0] || "not_a_bot_#{(rand*10000000000).to_i}"
bot = DummyBot.new(name, game, client)
bot.play

socket.close
