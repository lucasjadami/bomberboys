#!/usr/bin/env ruby

require 'socket'

require_relative '../lib/bomberboys_client'
include BomberboysClient

address = ARGV[0] || 'localhost'
port = ARGV[1] || 10011
name = ARGV[2] || "not_a_bot_#{(rand*10000000000).to_i}"

begin
  socket = TCPSocket.open(address, port)
rescue
  raise "No server listening on #{address}:#{port}"
end

client = Client.new(ServerInterface.new(socket), name)
game = Game.new

client.register(game)
client.connect
client.start

RandomBot.new(game, client).play

socket.close
